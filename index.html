<!DOCTYPE html>
<html>
<head>
  <style>body { background: #000; color: #0f0; font-family: monospace; padding: 20px; } pre { white-space: pre-wrap; }</style>
</head>
<body>
  <pre id="out">Processing...</pre>
  <script>
    async function collect() {
      const gpu = () => {
        try {
          const c = document.createElement('canvas');
          const gl = c.getContext('webgl');
          const d = gl.getExtension('WEBGL_debug_renderer_info');
          return d ? gl.getParameter(d.UNMASKED_RENDERER_ID) : 'N/A';
        } catch (e) { return 'N/A'; }
      };
      const bat = async () => {
        try {
          const s = await navigator.getBattery();
          return { level: (s.level * 100) + '%', charging: s.charging };
        } catch (e) { return 'N/A'; }
      };
      const payload = {
        screen: screen.width + "x" + screen.height,
        cores: navigator.hardwareConcurrency,
        memory: navigator.deviceMemory,
        gpu: gpu(),
        battery: await bat(),
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        touch: navigator.maxTouchPoints,
        url: window.location.href,
        referrer: document.referrer
      };
      const r = await fetch('/api/info', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      const d = await r.json();
      document.getElementById('out').textContent = JSON.stringify(d, null, 2);
    }
    collect();
  </script>
</body>
</html>
